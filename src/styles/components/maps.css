/**
 * ============================================
 * MAPS - Interactive Map Components
 * ============================================
 *
 * Styles pour les cartes interactives de zones de Pattaya.
 * Inclut containers, backgrounds thématiques, markers, et placeholders.
 *
 * USAGE:
 * - Carte Soi 6 (nightlife rose/cyan)
 * - Carte Walking Street (néon rouge)
 * - Carte LK Metro (bleu moderne)
 * - Carte Tree Town (vert naturel)
 *
 * COMPOSANTS UTILISANT:
 * - CustomSoi6Map.tsx
 * - CustomWalkingStreetMap.tsx
 * - PattayaMap.tsx (parent de toutes les cartes)
 *
 * @dependencies design-system.css (variables)
 * @version 1.0.0
 * @created 2025-01-09
 * @migrated Phase 3B - Extraction depuis nightlife-theme.css (lignes 994-1345)
 */

/* ============================================
   ZONE CONTAINERS
   ============================================ */

.zone-container {
  width: 100%;
  height: 100vh;
  position: relative;
  overflow: hidden;
  background: linear-gradient(135deg, #0f0f23, #1a1a2e);
}

.zone-content {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  cursor: move;
}

/* ============================================
   ESTABLISHMENT MARKERS
   ============================================ */

/**
 * Markers pour les établissements sur les cartes
 * WCAG: Touch optimization for mobile
 */
.establishment-marker {
  position: absolute;
  cursor: pointer;
  user-select: none;
  z-index: var(--z-content); /* 15 - Marqueurs carte */
  transition: all var(--duration-normal) var(--ease-in-out);

  /* Touch optimization for mobile devices */
  touch-action: none; /* Prevent browser default touch behaviors */
  -webkit-tap-highlight-color: transparent; /* Remove iOS tap highlight */
  -webkit-touch-callout: none; /* Disable iOS callout */
}

.establishment-marker:hover {
  transform: scale(1.05);
  z-index: 16; /* Marqueurs hover au-dessus du contenu */
}

/* ============================================
   MAP COMPONENTS
   ============================================ */

/**
 * Map Title Compact - Header ultra-efficace pour toutes les cartes
 * Color, textShadow et border définis inline par carte
 */
.map-title-compact-nightlife {
  position: absolute;
  top: var(--spacing-1);
  left: 50%;
  transform: translateX(-50%);
  font-size: var(--font-lg);
  font-weight: var(--font-weight-bold);
  text-align: center;
  background: rgba(0, 0, 0, 0.5);
  padding: var(--spacing-1) var(--spacing-3);
  border-radius: var(--border-radius-lg);
  z-index: var(--z-content); /* 15 */
  pointer-events: none;
}

/**
 * Container principal des cartes personnalisées
 */
.map-container-nightlife {
  position: relative;
  width: 100%;
  min-height: 37.5rem; /* 600px - Hauteur minimale desktop */
  border-radius: var(--border-radius-xl);
  overflow: hidden;
  border: 2px solid var(--border-primary);
  box-shadow: var(--shadow-2xl), inset 0 1px 0 rgba(193, 154, 107, 0.1);
  background-attachment: local;
}

/**
 * Container en mode édition (admin)
 */
.map-container-nightlife.edit-mode {
  border: 2px solid #00FF00;
  box-shadow: 0 0 20px rgba(0, 255, 0, 0.3);
}

/* ============================================
   MAP BACKGROUNDS - Thématiques par zone
   ============================================ */

/**
 * Background SOI 6 (nightlife original: rose/cyan/or)
 */
.map-bg-soi6 {
  background:
    radial-gradient(ellipse at 20% 30%, rgba(193, 154, 107, 0.3) 0%, transparent 50%),
    radial-gradient(ellipse at 80% 70%, rgba(0, 255, 255, 0.2) 0%, transparent 50%),
    radial-gradient(ellipse at 40% 80%, rgba(255, 215, 0, 0.2) 0%, transparent 40%),
    linear-gradient(135deg, #0a0a14 0%, #1a1025 30%, #2d1b3d 60%, #1a0f2e 100%);
  height: 37.5rem; /* 600px */
}

/**
 * Background WALKING STREET (néon rouge intense)
 */
.map-bg-walkingstreet {
  background:
    radial-gradient(ellipse at 30% 20%, rgba(255, 0, 64, 0.4) 0%, transparent 50%),
    radial-gradient(ellipse at 70% 80%, rgba(255, 107, 53, 0.3) 0%, transparent 50%),
    radial-gradient(ellipse at 50% 50%, rgba(220, 20, 60, 0.2) 0%, transparent 40%),
    linear-gradient(135deg, #1a0308 0%, #2d0a0f 30%, #4a0e1a 60%, #2d0610 100%);
  height: 37.5rem;
}

/**
 * Background LK METRO (bleu cyan moderne)
 */
.map-bg-lkmetro {
  background:
    radial-gradient(ellipse at 25% 40%, rgba(0, 212, 255, 0.3) 0%, transparent 50%),
    radial-gradient(ellipse at 75% 60%, rgba(64, 224, 208, 0.2) 0%, transparent 50%),
    radial-gradient(ellipse at 50% 20%, rgba(30, 144, 255, 0.2) 0%, transparent 40%),
    linear-gradient(135deg, #0a1219 0%, #0f1a2e 30%, #1a2a4a 60%, #0f1525 100%);
  height: 37.5rem;
}

/**
 * Background TREE TOWN (vert naturel)
 */
.map-bg-treetown {
  background:
    radial-gradient(ellipse at 40% 30%, rgba(50, 205, 50, 0.3) 0%, transparent 50%),
    radial-gradient(ellipse at 60% 70%, rgba(34, 139, 34, 0.2) 0%, transparent 50%),
    radial-gradient(ellipse at 30% 80%, rgba(154, 205, 50, 0.2) 0%, transparent 40%),
    linear-gradient(135deg, #0a140a 0%, #0f250f 30%, #1a4a1a 60%, #0f2e0f 100%);
  height: 37.5rem;
}

/* ============================================
   MAP PLACEHOLDERS
   ============================================ */

/**
 * Placeholder pour cartes en développement
 */
.map-zone-placeholder {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  color: var(--text-primary);
  font-size: var(--font-2xl);
  font-weight: var(--font-weight-bold);
  text-align: center;
}

.map-zone-placeholder-subtitle {
  font-size: var(--font-sm);
  margin-top: var(--spacing-3);
  opacity: 0.8;
}

/* ============================================
   RESPONSIVE - Mobile Full Screen
   ============================================ */

/**
 * Mobile: Cartes en plein écran (sans scroll)
 * Ajusté pour le header padding (5.625rem)
 */
@media (max-width: 48rem) {
  .map-container-nightlife {
    min-height: calc(100vh - 5.625rem);
    height: calc(100vh - 5.625rem);
    max-height: calc(100vh - 5.625rem);
    border-radius: 0; /* Pas de coins arrondis en plein écran */
  }

  /* Hauteurs adaptatives pour tous les backgrounds */
  .map-bg-soi6,
  .map-bg-walkingstreet,
  .map-bg-lkmetro,
  .map-bg-treetown {
    height: calc(100vh - 5.625rem);
  }

  .map-zone-placeholder {
    font-size: var(--font-xl);
    padding: var(--spacing-5);
  }

  .map-title-compact-nightlife {
    font-size: var(--font-base);
  }

  /* Masquer texte "Edit Mode" sur mobile - afficher uniquement icône */
  .edit-mode-text {
    display: none;
  }
}

/* Large phones - Header plus compact */
@media (max-width: 40rem) {
  .map-container-nightlife {
    min-height: calc(100vh - 4.6875rem);
    height: calc(100vh - 4.6875rem);
    max-height: calc(100vh - 4.6875rem);
  }

  .map-bg-soi6,
  .map-bg-walkingstreet,
  .map-bg-lkmetro,
  .map-bg-treetown {
    height: calc(100vh - 4.6875rem);
  }
}

/* Small phones - Header encore plus compact */
@media (max-width: 30rem) {
  .map-container-nightlife {
    min-height: calc(100vh - 4.375rem);
    height: calc(100vh - 4.375rem);
    max-height: calc(100vh - 4.375rem);
  }

  .map-bg-soi6,
  .map-bg-walkingstreet,
  .map-bg-lkmetro,
  .map-bg-treetown {
    height: calc(100vh - 4.375rem);
  }
}

/* Very small phones */
@media (max-width: 23.4375rem) {
  .map-container-nightlife {
    min-height: calc(100vh - 4.25rem);
    height: calc(100vh - 4.25rem);
    max-height: calc(100vh - 4.25rem);
  }

  .map-bg-soi6,
  .map-bg-walkingstreet,
  .map-bg-lkmetro,
  .map-bg-treetown {
    height: calc(100vh - 4.25rem);
  }
}

/* ============================================
   RESPONSIVE - Mobile Landscape (Orientation-aware)
   ============================================ */

/**
 * Landscape: Smartphones tournés en mode paysage
 * Problème: Header + Map trop hauts pour écrans 393px height
 * Solution: Header compact (56px) + Map dynamique calc(100vh - header)
 *
 * Appareils de référence (2023-2025):
 * - iPhone 15 Pro: 852×393px landscape
 * - iPhone 14 Pro: 852×393px landscape
 * - Galaxy S23: 914×412px landscape
 * - Pixel 8: 915×412px landscape
 */

/* Large Landscape - Height < 600px */
@media (max-height: 37.5rem) and (orientation: landscape) {
  .map-container-nightlife {
    min-height: calc(100vh - 3.5rem);
    height: calc(100vh - 3.5rem);
    max-height: calc(100vh - 3.5rem);
    border-radius: 0;
  }

  .map-bg-soi6,
  .map-bg-walkingstreet,
  .map-bg-lkmetro,
  .map-bg-treetown {
    height: calc(100vh - 3.5rem);
  }

  /* Titre carte plus compact */
  .map-title-compact-nightlife {
    font-size: var(--font-sm);
    padding: var(--spacing-05) var(--spacing-2);
    top: var(--spacing-05);
  }
}

/* Medium Landscape - Height < 480px */
@media (max-height: 30rem) and (orientation: landscape) {
  .map-container-nightlife {
    min-height: calc(100vh - 3.25rem);
    height: calc(100vh - 3.25rem);
    max-height: calc(100vh - 3.25rem);
  }

  .map-bg-soi6,
  .map-bg-walkingstreet,
  .map-bg-lkmetro,
  .map-bg-treetown {
    height: calc(100vh - 3.25rem);
  }

  .map-title-compact-nightlife {
    font-size: var(--font-xs);
    padding: var(--spacing-05) var(--spacing-15);
  }
}

/* Small Landscape - Height < 375px (Ultra Compact) */
@media (max-height: 23.4375rem) and (orientation: landscape) {
  .map-container-nightlife {
    min-height: calc(100vh - 3rem);
    height: calc(100vh - 3rem);
    max-height: calc(100vh - 3rem);
  }

  .map-bg-soi6,
  .map-bg-walkingstreet,
  .map-bg-lkmetro,
  .map-bg-treetown {
    height: calc(100vh - 3rem);
  }

  /* Masquer titre carte pour maximiser espace map */
  .map-title-compact-nightlife {
    display: none;
  }
}

/* ============================================
   VIP ESTABLISHMENT EFFECTS - Ultra Premium
   ============================================ */

/**
 * VIP Establishment Marker - Effet premium marquant
 * Combo MAX: Pulse + Glow + Grande couronne + Badge VIP
 */
.vip-establishment-marker {
  animation: vipPulse 2s ease-in-out infinite;
  filter: brightness(1.1);
}

/**
 * Badge VIP texte - Rectangle gold avec texte blanc
 */
.vip-badge {
  position: absolute;
  bottom: -8px;
  left: 50%;
  transform: translateX(-50%);
  background: linear-gradient(135deg, var(--color-gold) 0%, #FFA500 100%);
  color: #000;
  font-size: 10px; /* WCAG: Minimum 10px for readability */
  font-weight: 700;
  padding: 2px 6px;
  border-radius: 4px;
  box-shadow: 0 2px 6px rgba(255, 215, 0, 0.6);
  z-index: 100;
  pointer-events: none;
  letter-spacing: 0.5px;
}

/**
 * Grande couronne VIP (x3 taille actuelle)
 */
.vip-crown {
  font-size: 48px;
  filter: drop-shadow(0 0 8px rgba(255, 215, 0, 0.9));
  animation: vipCrownFloat 3s ease-in-out infinite;
}

/**
 * Animation pulse pour établissements VIP
 * Scale subtle + Glow marqué (x3-4)
 */
@keyframes vipPulse {
  0%, 100% {
    transform: scale(1);
    box-shadow:
      0 0 40px rgba(255, 215, 0, 1),
      0 0 25px rgba(255, 215, 0, 0.8),
      0 0 10px rgba(255, 215, 0, 0.6);
  }
  50% {
    transform: scale(1.05);
    box-shadow:
      0 0 70px rgba(255, 215, 0, 1),
      0 0 45px rgba(255, 215, 0, 0.9),
      0 0 20px rgba(255, 215, 0, 0.7);
  }
}

/**
 * Animation float pour la couronne
 * Légère oscillation verticale pour effet "flottant"
 */
@keyframes vipCrownFloat {
  0%, 100% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-5px);
  }
}

/* ============================================
   VIP RESPONSIVE - Adaptation Mobile/Tablet
   ============================================ */

/**
 * Tablet - VIP modéré (768px and below)
 * Couronne 75% desktop, badge plus petit
 */
@media (max-width: 48rem) {
  .vip-crown {
    font-size: 36px;
  }

  .vip-badge {
    font-size: 10px; /* WCAG: Minimum 10px for readability */
    padding: 2px 5px;
  }
}

/**
 * Mobile - VIP raisonnable (480px and below)
 * Couronne 58% desktop, glow réduit, badge minimal
 */
@media (max-width: 30rem) {
  .vip-crown {
    font-size: 28px;
  }

  .vip-badge {
    font-size: 10px; /* WCAG: Minimum 10px for readability */
    padding: 1px 4px;
    bottom: -6px;
  }

  /* Glow réduit pour mobile (performance + espace) */
  @keyframes vipPulse {
    0%, 100% {
      transform: scale(1);
      box-shadow:
        0 0 30px rgba(255, 215, 0, 1),
        0 0 20px rgba(255, 215, 0, 0.8),
        0 0 8px rgba(255, 215, 0, 0.6);
    }
    50% {
      transform: scale(1.05);
      box-shadow:
        0 0 50px rgba(255, 215, 0, 1),
        0 0 35px rgba(255, 215, 0, 0.9),
        0 0 15px rgba(255, 215, 0, 0.7);
    }
  }
}

/* ============================================
   ACCESSIBILITY
   ============================================ */

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  .establishment-marker {
    transition: none;
  }

  .establishment-marker:hover {
    transform: none;
  }

  /* Désactiver animations VIP pour reduced-motion */
  .vip-establishment-marker {
    animation: none;
  }

  .vip-crown {
    animation: none;
  }
}

/* High contrast */
@media (prefers-contrast: high) {
  .map-container-nightlife {
    border-width: 3px;
  }

  .establishment-marker {
    outline: 2px solid var(--text-primary);
  }
}
