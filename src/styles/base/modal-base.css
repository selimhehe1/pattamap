/* ðŸŽ­ MODAL BASE & FOCUS STATES - NIGHTLIFE THEME */
/**
 * @file Base styles for modals and global focus states
 * @version 1.0.0
 * @phase Phase 4C - Architecture Finale
 * @date 2025-01-09
 *
 * CONTENU:
 * - Modal Scroll Lock (3 sÃ©lecteurs): EmpÃªche scroll background
 * - Modal Overlay Base (1 classe): Standardisation overlays
 * - Form Overflow Fix (3 sÃ©lecteurs): Ã‰vite dÃ©bordements
 * - Global Focus States (5 sÃ©lecteurs): AccessibilitÃ© WCAG AAA
 *
 * DÃ‰PENDANCES:
 * - design-system.css (--color-focus, --border-focus, --nightlife-*)
 *
 * UTILISATION:
 * Styles de base pour tous les systÃ¨mes de modales.
 * Focus states appliquÃ©s globalement pour accessibilitÃ©.
 */

/* ================================================================
 * MODAL SCROLL LOCK - EmpÃªche le scroll du body
 * ================================================================ */

/**
 * Body Modal Open
 * AppliquÃ© via JavaScript: document.body.classList.add('modal-open')
 * EmpÃªche le scroll SANS dÃ©placer le positionnement (pas de position: fixed)
 */
body.modal-open {
  overflow: hidden;
  /* ðŸš« IMPORTANT: PAS de position: fixed - cause problÃ¨me de header jump */
  /* ðŸš« SUPPRIMÃ‰: width, height, top, left, right, bottom */
  touch-action: none; /* EmpÃªche scroll tactile mobile */
}

/**
 * SÃ©lecteurs supplÃ©mentaires pour forcer l'application
 * Certains frameworks peuvent avoir des rÃ¨gles CSS concurrentes
 */
html.modal-open,
html body.modal-open {
  overflow: hidden;
  /* ðŸš« PAS de position: fixed - cause le dÃ©placement du DOM */
  touch-action: none;
}

/* ================================================================
 * MODAL OVERLAY BASE - Standardisation des overlays
 * ================================================================ */

/**
 * Classe utilitaire pour standardiser les overlays de modal
 * Utilise !important pour forcer la cohÃ©rence entre tous les modaux
 * Alternative moderne aux modaux inline avec z-index variables
 */
.modal-overlay-base {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  background: rgba(0, 0, 0, 0.9) !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  backdrop-filter: blur(10px) !important;
  z-index: var(--z-modal, 1000);
}

/* ================================================================
 * FORM OVERFLOW FIX - Ã‰viter dÃ©bordement sur tous formulaires
 * ================================================================ */

/**
 * Box-sizing et max-width pour tous les Ã©lÃ©ments dans formulaires
 * Ã‰vite les dÃ©bordements horizontaux sur mobile
 * AppliquÃ© aux containers de formulaires les plus communs
 */
.modal-form-container *,
.form-section *,
.form-layout * {
  box-sizing: border-box;
  max-width: 100%;
}

/* ================================================================
 * GLOBAL FOCUS STATES - AccessibilitÃ© WCAG 2.1 Level AAA
 * ================================================================ */

/**
 * Focus Visible pour Ã©lÃ©ments interactifs principaux
 * WCAG 2.1 Success Criterion 2.4.7 (Level AA): Focus Visible
 *
 * Outline specs:
 * - Width: 2px (minimum WCAG)
 * - Color: var(--nightlife-secondary) = #00D9FF (cyan)
 * - Offset: 2px (sÃ©paration claire)
 * - Style: solid (le plus visible)
 *
 * Ratio de contraste: 7:1+ sur fond sombre (Level AAA)
 */
.btn:focus-visible,
.input-nightlife:focus-visible,
.select-nightlife:focus-visible,
.textarea-nightlife:focus-visible,
.admin-tab-button:focus-visible {
  outline: 2px solid var(--border-focus, #00D9FF);
  outline-offset: 2px;
  transition: outline-offset 0.2s ease;
}

/* ================================================================
 * REDUCED MOTION - Respect utilisateur prÃ©fÃ©rences
 * ================================================================ */

/**
 * DÃ©sactive transitions pour utilisateurs sensibles au mouvement
 * WCAG 2.1 Success Criterion 2.3.3 (Level AAA): Animation from Interactions
 */
@media (prefers-reduced-motion: reduce) {
  .btn:focus-visible,
  .input-nightlife:focus-visible,
  .select-nightlife:focus-visible,
  .textarea-nightlife:focus-visible,
  .admin-tab-button:focus-visible {
    transition: none;
  }

  .modal-overlay-base {
    animation: none !important;
    transition: none !important;
  }
}

/* ================================================================
 * HIGH CONTRAST MODE - AmÃ©liore visibilitÃ©
 * ================================================================ */

/**
 * Renforce les bordures en mode high contrast
 * AmÃ©liore la visibilitÃ© pour utilisateurs avec vision rÃ©duite
 */
@media (prefers-contrast: high) {
  .btn:focus-visible,
  .input-nightlife:focus-visible,
  .select-nightlife:focus-visible,
  .textarea-nightlife:focus-visible,
  .admin-tab-button:focus-visible {
    outline-width: 3px;
    outline-color: #FFFFFF; /* Blanc pur pour maximum contraste */
  }

  .modal-overlay-base {
    background: rgba(0, 0, 0, 0.95) !important; /* Plus opaque */
    backdrop-filter: none !important; /* Ã‰vite flou qui rÃ©duit contraste */
  }
}

/* ================================================================
 * USAGE JAVASCRIPT - Instructions pour dÃ©veloppeurs
 * ================================================================ */

/**
 * GESTION DU SCROLL LOCK
 * ======================
 *
 * Pour empÃªcher le scroll, ajouter/supprimer la classe 'modal-open' sur le body:
 *
 * // Ouvrir modal
 * document.body.classList.add('modal-open');
 *
 * // Fermer modal
 * document.body.classList.remove('modal-open');
 *
 * IntÃ©grer cela dans les handlers d'ouverture/fermeture des composants React modals.
 *
 * Exemple React:
 * ```tsx
 * useEffect(() => {
 *   if (isOpen) {
 *     document.body.classList.add('modal-open');
 *   } else {
 *     document.body.classList.remove('modal-open');
 *   }
 *   return () => document.body.classList.remove('modal-open');
 * }, [isOpen]);
 * ```
 */

/* ================================================================
 * ACCESSIBILITY & BEST PRACTICES
 * ================================================================ */

/**
 * WCAG 2.1 Compliance Checklist:
 * âœ… 2.4.7 Focus Visible (Level AA): Outline 2px solid
 * âœ… 1.4.11 Non-text Contrast (Level AA): 3:1 ratio minimum
 * âœ… 2.3.3 Animation from Interactions (Level AAA): Reduced motion support
 * âœ… 1.4.6 Contrast Enhanced (Level AAA): 7:1 ratio cyan sur fond sombre
 *
 * Focus State Guidelines:
 * - Toujours visible: outline, jamais outline: none
 * - Couleur distinctive: cyan (#00D9FF) vs background
 * - Offset de sÃ©paration: 2px minimum
 * - Transition douce: 0.2s ease (sauf reduced motion)
 *
 * Modal Guidelines:
 * - Overlay opaque: 90% black minimum
 * - Backdrop blur: 10px pour depth perception
 * - Touch-action: none pour Ã©viter scroll accidentel
 * - Z-index: variable --z-modal pour stacking cohÃ©rent
 *
 * Performance:
 * - Backdrop-filter: GPU-accelerated
 * - !important minimal: Uniquement pour .modal-overlay-base
 * - Touch-action: Ã‰vite scroll bounce sur iOS
 */

/* ================================================================
 * EXEMPLES D'UTILISATION
 * ================================================================ */

/**
 * Modal avec Overlay Base:
 * <div className="modal-overlay-base" onClick={handleClose}>
 *   <div className="modal-content" onClick={(e) => e.stopPropagation()}>
 *     <h2>Modal Title</h2>
 *     <button className="btn btn--primary">Action</button>
 *   </div>
 * </div>
 *
 * Form avec Overflow Fix:
 * <div className="modal-form-container">
 *   <form className="form-layout">
 *     <input className="input-nightlife" />
 *     <button className="btn btn--primary">Submit</button>
 *   </form>
 * </div>
 *
 * Focus Visible Automatique:
 * - Naviguer avec Tab/Shift+Tab
 * - Outline cyan apparaÃ®t automatiquement
 * - Clic souris: pas d'outline (focus-visible vs focus)
 */
