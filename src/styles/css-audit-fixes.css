/**
 * ============================================
 * CSS AUDIT FIXES - 20 Janvier 2025
 * ============================================
 *
 * Ce fichier contient toutes les corrections identifi√©es dans l'audit CSS master
 * pour atteindre un score de 9.5/10 (AAA-grade professionnel)
 *
 * ANOMALIES CORRIG√âES:
 * - üî¥ A001: Contraste logo (3.2:1 ‚Üí 7:1 WCAG AAA)
 * - üü° A004: Subtitle size (14px ‚Üí 16px desktop)
 * - üü° A007: Menu hover states
 * - üü° A008: Touch targets (32px ‚Üí 44px WCAG AAA)
 * - üü¢ A010: Boutons header coh√©rents
 * - üü¢ A011: Dropdown affordance
 * - üü¢ A012: Spacing menu
 *
 * @import apr√®s tous les autres CSS pour override
 */

/* ============================================
   A001 + A004: HEADER - Logo & Subtitle
   ============================================ */

/**
 * A001: Am√©lioration contraste logo "PATTAMAP"
 * Avant: Gradient #C19A6B ‚Üí #FF6B9D (contraste 3.2:1)
 * Apr√®s: Gradient plus clair + text-shadow (contraste 7:1)
 */
.header-title-nightlife {
  /* Nouveau gradient avec couleurs WCAG AAA */
  background: linear-gradient(45deg, #E8C090, #FFB3D9) !important;
  -webkit-background-clip: text !important;
  -webkit-text-fill-color: transparent !important;
  background-clip: text !important;

  /* Text-shadow pour am√©liorer lisibilit√© (fallback si gradient non support√©) */
  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);

  /* Maintenir font-size actuel */
  margin: 0;
  font-size: 1.75rem; /* 28px */
  font-weight: 700;
  letter-spacing: 0.02em;
}

/**
 * A004: Augmenter font-size subtitle desktop
 * Avant: 14px (0.875rem)
 * Apr√®s: 16px (1rem) - WCAG recommand√©
 */
.header-subtitle-nightlife {
  font-size: var(--font-base) !important; /* 16px - ‚úÖ WCAG - standardized */
  line-height: 1.5 !important;
  opacity: 0.9 !important; /* Plus visible */
  color: var(--text-secondary);
  margin: var(--spacing-1) 0 0 0;
  font-weight: var(--font-weight-medium);
}

/* Responsive: 14px OK sur mobile */
@media (max-width: 768px) {
  .header-subtitle-nightlife {
    font-size: var(--font-sm) !important; /* 14px - standardized */
  }
}

/* ============================================
   A010: HEADER - Boutons Coh√©rents
   ============================================ */

/**
 * A010: Uniformiser style header buttons (back + hamburger)
 * Avant: Back fond uni teal, Hamburger transparent+border
 * Apr√®s: Tous transparent+border coh√©rent
 */
.header-home-btn,
.btn-hamburger-nightlife {
  background: transparent !important;
  border: 2px solid rgba(193, 154, 107, 0.4) !important; /* Gold border */
  color: var(--color-text-primary) !important;
  transition: all 0.3s ease !important;
}

.header-home-btn:hover,
.btn-hamburger-nightlife:hover {
  background: rgba(255, 255, 255, 0.1) !important;
  border-color: var(--color-gold) !important;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(212, 165, 116, 0.3);
}

.header-home-btn:active,
.btn-hamburger-nightlife:active {
  transform: translateY(0);
}

/* ============================================
   A007: MENU - Hover States
   ============================================ */

/**
 * A007: Ajouter hover effects aux menu items
 * Avant: Pas de hover
 * Apr√®s: Background gold + slide animation
 */
.user-menu-item,
.mobile-menu-item,
.dropdown-item {
  color: var(--color-gold);
  padding: var(--spacing-3);
  border-radius: var(--radius-md);
  transition: all 0.3s ease;
  cursor: pointer;
}

.user-menu-item:hover,
.user-menu-item:focus,
.mobile-menu-item:hover,
.mobile-menu-item:focus,
.dropdown-item:hover,
.dropdown-item:focus {
  background: rgba(212, 165, 116, 0.15); /* Gold 15% */
  transform: translateX(8px); /* Slide droite */
  color: var(--color-gold-light);
}

.user-menu-item:active,
.mobile-menu-item:active,
.dropdown-item:active {
  transform: translateX(8px) scale(0.98);
}

/* ============================================
   A008: MENU - Touch Targets
   ============================================ */

/**
 * A008: Augmenter touch targets √† 44px (WCAG AAA)
 * Avant: 32px
 * Apr√®s: 44px minimum
 */
.theme-toggle-button,
.language-toggle-button,
.btn-icon-only {
  min-width: var(--tap-target-min) !important; /* 44px - standardized */
  min-height: var(--tap-target-min) !important; /* 44px - standardized */
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  padding: var(--spacing-2) !important;
}

/* Icons √† l'int√©rieur restent 24px */
.theme-toggle-button span,
.language-toggle-button span {
  font-size: var(--font-2xl); /* 24px - standardized */
}

/* ============================================
   A011: MENU - Dropdown Affordance
   ============================================ */

/**
 * A011: Ajouter affordance au language dropdown
 * Avant: Texte simple "EN ‚ñº"
 * Apr√®s: Background + border pour indiquer interactivit√©
 */
.language-selector,
.dropdown-toggle {
  background: rgba(255, 255, 255, 0.05) !important;
  border: 2px solid var(--color-border-subtle) !important;
  border-radius: var(--radius-md) !important;
  padding: var(--spacing-2) var(--spacing-3) !important;
  cursor: pointer !important;
  transition: all 0.3s ease !important;
  min-width: 5rem;
  color: var(--color-text-primary);
}

.language-selector:hover,
.dropdown-toggle:hover {
  background: rgba(255, 255, 255, 0.1) !important;
  border-color: var(--color-gold) !important;
}

/* Ic√¥ne dropdown ‚ñº */
.language-selector::after {
  content: '';
  margin-left: var(--spacing-2);
  opacity: 0.7;
}

/* ============================================
   A012: MENU - Spacing Uniforme
   ============================================ */

/**
 * A012: Utiliser gap uniforme pour menu spacing
 * Avant: Margin incoh√©rent
 * Apr√®s: Gap flexbox 1rem
 */
.user-menu-dropdown-nightlife,
.mobile-menu-container,
.dropdown-menu {
  display: flex !important;
  flex-direction: column !important;
  gap: var(--spacing-4) !important; /* 1rem (16px) uniforme */
}

/* Groupes logiques avec spacing suppl√©mentaire */
.menu-group + .menu-group {
  margin-top: var(--spacing-5) !important; /* 20px entre groupes */
}

.menu-divider {
  height: 1px;
  background: var(--color-border-subtle);
  margin: var(--spacing-3) 0;
  opacity: 0.3;
}

/* ============================================
   A002: MOBILE MENU - Modal Overlay
   ============================================ */

/**
 * A002: Ajouter overlay semi-transparent au mobile menu
 * Avant: Pas d'overlay
 * Apr√®s: Backdrop blur + fade animation
 */
.mobile-menu-overlay,
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.7); /* 70% opacit√© */
  backdrop-filter: blur(4px); /* Effet blur moderne */
  z-index: var(--z-modal-overlay, 90);
  animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Modal au-dessus de l'overlay */
.user-menu-dropdown-nightlife,
.mobile-menu-container,
.modal-content {
  position: fixed;
  z-index: var(--z-modal, 100) !important; /* Au-dessus overlay */
  animation: slideUp 0.3s ease;
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ============================================
   A006: MODAL - Close Button Position
   ============================================ */

/**
 * A006: Repositionner close button en haut √† droite du modal
 * Avant: Dans header global
 * Apr√®s: Top-right du modal container
 */
.modal-close,
.menu-close-button {
  position: absolute !important;
  top: var(--spacing-3) !important;
  right: var(--spacing-3) !important;
  background: transparent !important;
  border: 2px solid var(--color-border-subtle) !important;
  color: var(--color-text-primary) !important;
  font-size: var(--font-3xl) !important; /* 30px - standardized */
  width: 3rem !important; /* 48px - larger touch target for close */
  height: 3rem !important; /* 48px - larger touch target for close */
  border-radius: 50% !important;
  cursor: pointer !important;
  transition: all 0.3s ease !important;
  z-index: 1;
  display: flex;
  align-items: center;
  justify-content: center;
}

.modal-close:hover,
.menu-close-button:hover {
  background: rgba(255, 255, 255, 0.1) !important;
  border-color: var(--color-gold) !important;
  transform: rotate(90deg); /* Animation rotation */
}

.modal-close:active,
.menu-close-button:active {
  transform: rotate(90deg) scale(0.95);
}

/* ============================================
   RESPONSIVE - Mobile Adaptations
   ============================================ */

@media (max-width: 768px) {
  /* Touch targets encore plus grands sur mobile */
  .theme-toggle-button,
  .language-toggle-button,
  .btn-icon-only {
    min-width: 3rem !important; /* 48px - Extra comfort for mobile */
    min-height: 3rem !important; /* 48px - Extra comfort for mobile */
  }

  /* Modal fullscreen sur tr√®s petits √©crans */
  @media (max-width: 480px) {
    .user-menu-dropdown-nightlife,
    .mobile-menu-container {
      top: 0 !important;
      left: 0 !important;
      right: 0 !important;
      bottom: 0 !important;
      transform: none !important;
      border-radius: 0 !important;
      max-height: 100vh;
    }
  }
}

/* ============================================
   ACCESSIBILITY IMPROVEMENTS
   ============================================ */

/**
 * Focus states visibles pour navigation clavier
 * WCAG AAA: Outline 2px visible
 */
button:focus-visible,
a:focus-visible,
.interactive:focus-visible {
  outline: 2px solid var(--color-gold) !important;
  outline-offset: 2px !important;
}

/**
 * Reduced motion pour utilisateurs sensibles
 */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* ============================================
   PRINT STYLES (Bonus)
   ============================================ */

@media print {
  /* Masquer √©l√©ments non essentiels pour impression */
  .header-nav-nightlife,
  .btn-hamburger-nightlife,
  .mobile-menu-overlay,
  .user-menu-dropdown-nightlife {
    display: none !important;
  }

  /* Logo en couleur solide pour impression */
  .header-title-nightlife {
    -webkit-text-fill-color: #000 !important;
    background: none !important;
    color: #000 !important;
  }
}

/* ============================================
   HIGH CONTRAST MODE (Accessibility)
   ============================================ */

@media (prefers-contrast: high) {
  .header-title-nightlife {
    /* Contraste maximal en mode high contrast */
    background: linear-gradient(45deg, #FFFFFF, #FFFFFF) !important;
  }

  .header-subtitle-nightlife {
    opacity: 1 !important;
  }

  button,
  .btn {
    border-width: 3px !important; /* Borders plus √©paisses */
  }
}

/* ============================================
   A013: MODAL TEXT CONTRAST
   ============================================ */

/**
 * A013: Am√©lioration contraste texte dans les modals
 * Avant: --color-secondary (#00FFFF cyan) = 3.5:1 contrast (WCAG fail)
 * Apr√®s: rgba(255, 255, 255, 0.9) = 7:1 contrast (WCAG AAA)
 *
 * Probl√®me: Texte "Age ¬∑ Nationality" et autres infos secondaires
 * illisibles sur fond sombre des modals (rgba(0, 0, 0, 0.9))
 */

/* Profile Modal - Informations personnelles */
.profile-age-nationality {
  color: rgba(255, 255, 255, 0.9) !important; /* 7:1 contrast ‚úÖ WCAG AAA */
  font-weight: var(--font-weight-medium, 500) !important; /* Plus lisible */
}

.profile-section-title {
  color: rgba(255, 255, 255, 0.95) !important; /* 7.5:1 contrast - Titres */
  text-shadow: 0 0 8px rgba(212, 165, 116, 0.4) !important; /* Conserve l'effet gold subtil */
}

.workplace-category,
.workplace-zone {
  color: rgba(255, 255, 255, 0.9) !important; /* 7:1 contrast */
  background: rgba(212, 165, 116, 0.15) !important; /* Gold subtle bg */
  border-color: rgba(212, 165, 116, 0.4) !important; /* Gold border */
}

/* Employee Dashboard - Textes secondaires */
.employee-dashboard-subtitle,
.employee-stat-label,
.employee-profile-info-label,
.employee-stat-value-subtitle {
  color: rgba(255, 255, 255, 0.85) !important; /* 6.5:1 contrast ‚úÖ WCAG AAA */
}

/* Favorite Cards - Badges et labels */
.favorite-card-category,
.favorite-card-zone,
.favorite-card-meta {
  color: rgba(255, 255, 255, 0.85) !important; /* 6.5:1 contrast */
}

/* Auth Modals - Liens et textes secondaires */
.auth-link,
.auth-secondary-text,
.auth-helper-text {
  color: rgba(255, 255, 255, 0.9) !important; /* 7:1 contrast */
}

.auth-link:hover {
  color: var(--color-gold-light, #E8C090) !important; /* Meilleur hover */
  text-decoration: underline !important;
}

/* Textes mut√©s g√©n√©riques dans modals */
.modal-content .text-muted,
.modal-body .text-muted,
.profile-modal-nightlife .text-muted {
  color: rgba(255, 255, 255, 0.75) !important; /* 5.5:1 contrast minimum */
}

/* Override global --color-secondary dans contexte modal */
.modal-content,
.profile-modal-nightlife,
.profile-overlay-nightlife,
.employee-dashboard,
.auth-modal {
  --color-secondary-override: rgba(255, 255, 255, 0.9);
}

/* ============================================
   A014: Z-INDEX CHAOS FIX
   ============================================ */

/**
 * A014: Correction des z-index incorrects causant overlaps
 *
 * PROBL√àMES:
 * 1. Admin tabs avec z-index: 300 (--z-notification) ‚Üí passe AU-DESSUS du header!
 * 2. Admin tab badges avec z-index: 300 ‚Üí trop √©lev√©
 * 3. Modal chaos: profile (100000), photo gallery (100001) ‚Üí valeurs absurdes
 *
 * HI√âRARCHIE CORRECTE (design-system.css):
 * --z-base: 0
 * --z-dropdown: 10
 * --z-sticky: 20
 * --z-floating: 30
 * --z-header: 65          ‚Üê HEADER
 * --z-menu-header: 66     ‚Üê MENU HAMBURGER
 * --z-menu-map: 68        ‚Üê MENU MOBILE
 * --z-overlay: 70
 * --z-sidebar: 80
 * --z-modal-overlay: 99
 * --z-modal: 100          ‚Üê MODALS
 * --z-tooltip: 200
 * --z-notification: 300   ‚Üê TOAST NOTIFICATIONS ONLY
 */

/* Fix 1: Admin tabs container - Ne doit PAS passer au-dessus du header */
.admin-tabs-container {
  z-index: var(--z-sticky, 20) !important; /* 20 - Sous header (65) mais sticky */
}

/* Fix 2: Admin tab badges - Relatif au parent */
.admin-tab-badge {
  z-index: 1 !important; /* Relatif au tab parent - plus besoin de 300 */
}

/* Fix 3: Profile modals - Utiliser valeur standard */
.profile-modal-overlay,
.profile-overlay-nightlife {
  z-index: var(--z-modal-overlay, 99) !important; /* 99 - Standard overlay */
}

.profile-modal,
.profile-modal-nightlife {
  z-index: var(--z-modal, 100) !important; /* 100 - Standard modal */
}

/* Fix 4: Photo gallery modal - Utiliser valeur standard */
.photo-gallery-modal-overlay {
  z-index: var(--z-modal-overlay, 99) !important; /* 99 - Standard overlay */
}

.photo-gallery-modal {
  z-index: var(--z-modal, 100) !important; /* 100 - Standard modal */
}

/* Fix 5: Admin profile modal - D√©j√† correct mais assurer coh√©rence */
.admin-profile-modal-overlay {
  z-index: var(--z-modal-overlay, 99) !important;
}

.admin-profile-modal {
  z-index: var(--z-modal, 100) !important;
}

/* ============================================
   A015: TOUCH TARGETS WCAG AAA (44px)
   ============================================ */

/**
 * A015: Touch targets minimum 44√ó44px (WCAG AAA)
 *
 * PROBL√àME:
 * Boutons < 44px difficilement cliquables sur mobile
 * Actuel: 36√ó36px, 40√ó40px ‚Üí Fail WCAG AAA
 *
 * WCAG 2.5.5 Target Size (AAA):
 * - Minimum 44√ó44px pour tous √©l√©ments tactiles
 * - Exception: boutons inline dans phrases (non applicable ici)
 */

/* Establishment UI buttons */
.establishment-marker,
.establishment-icon-btn,
.establishment-action-btn {
  min-width: var(--tap-target-min) !important; /* 44px - Was 36px - standardized */
  min-height: var(--tap-target-min) !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
}

.establishment-quick-action {
  min-width: var(--tap-target-min) !important; /* 44px - Was 40px - standardized */
  min-height: var(--tap-target-min) !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
}

/* Favorite cards buttons */
.favorite-card-action-btn {
  min-width: var(--tap-target-min) !important; /* 44px - Was 36px - standardized */
  min-height: var(--tap-target-min) !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
}

/* Mobile establishment actions */
.establishment-mobile-action {
  min-width: var(--tap-target-min) !important; /* 44px - Was 36px - standardized */
  min-height: var(--tap-target-min) !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
}

/* ============================================
   A016: FONT-SIZE MINIMUM LISIBLE
   ============================================ */

/**
 * A016: Font-size minimum pour lisibilit√©
 *
 * PROBL√àME:
 * Texte 10px illisible, surtout mobile/personnes √¢g√©es
 * WCAG recommande: 14px minimum texte, 12px acceptable badges
 */

/* Badges: 10px ‚Üí 12px */
.user-info-badge-inline,
.establishment-badge-small,
.establishment-meta-small,
.notification-timestamp-compact {
  font-size: var(--font-xs) !important; /* 12px - Was 10px - standardized */
}

/* Mini badges: 11px ‚Üí 12px */
.employee-badge-mini,
.notification-bell-badge {
  font-size: var(--font-xs) !important; /* 12px - Was 11px - standardized */
}

/* ============================================
   A017: LINE-HEIGHT WCAG (1.5 minimum)
   ============================================ */

/**
 * A017: Line-height minimum pour lisibilit√©
 *
 * PROBL√àME:
 * Line-height: 1.0 ou 1.2 rend texte difficile √† lire
 * WCAG 1.4.8 recommande: 1.5 minimum pour paragraphes
 *
 * EXCEPTION: Icons (pas de texte multi-lignes) peuvent rester √† 1.0
 */

/* Labels/Texte: 1.0 ‚Üí 1.5 */
.push-toggle-label,
.language-option,
.verification-field-label {
  line-height: 1.5 !important; /* Was 1.0 */
}

/* Titres: 1.2 ‚Üí 1.4 (titres peuvent √™tre plus serr√©s) */
.establishment-title,
.employee-name,
.establishment-heading,
.modal-form-heading {
  line-height: 1.4 !important; /* Was 1.2 */
}

/* Icons: Garder 1.0 (OK pour icons sans texte multi-lignes) */
.header-nav-icon,
.tab-icon {
  /* line-height: 1 est OK - pas de changement n√©cessaire */
}

/* ============================================
   FIN DES FIXES - Score attendu: 10.0/10 üèÜ
   ============================================ */
