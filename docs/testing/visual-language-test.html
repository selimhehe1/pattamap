<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PattaMap i18n Visual Testing</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #1a0033 0%, #0d0019 100%);
      color: #fff;
      padding: 2rem;
      min-height: 100vh;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    header {
      text-align: center;
      margin-bottom: 3rem;
      padding-bottom: 2rem;
      border-bottom: 2px solid #9B5DE5;
    }

    h1 {
      font-size: 2.5rem;
      color: #FF1B8D;
      margin-bottom: 0.5rem;
    }

    .subtitle {
      color: #FFD700;
      font-size: 1.2rem;
    }

    .test-card {
      background: rgba(155, 93, 229, 0.1);
      border: 2px solid #9B5DE5;
      border-radius: 12px;
      padding: 2rem;
      margin-bottom: 2rem;
      box-shadow: 0 8px 32px rgba(255, 27, 141, 0.2);
    }

    .test-card h2 {
      color: #00F5FF;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .status-badge {
      display: inline-block;
      padding: 0.25rem 0.75rem;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: bold;
      margin-left: auto;
    }

    .status-pass {
      background: #32CD32;
      color: #000;
    }

    .status-warn {
      background: #FFD700;
      color: #000;
    }

    .status-fail {
      background: #FF1B8D;
      color: #fff;
    }

    .test-instructions {
      background: rgba(0, 245, 255, 0.1);
      border-left: 4px solid #00F5FF;
      padding: 1rem;
      margin: 1rem 0;
      border-radius: 4px;
    }

    .test-instructions h3 {
      color: #FFD700;
      font-size: 1rem;
      margin-bottom: 0.5rem;
    }

    .test-instructions ol {
      padding-left: 1.5rem;
      line-height: 1.6;
    }

    .test-checklist {
      list-style: none;
      padding-left: 0;
    }

    .test-checklist li {
      padding: 0.75rem;
      margin: 0.5rem 0;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 8px;
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .checkbox {
      width: 20px;
      height: 20px;
      border: 2px solid #9B5DE5;
      border-radius: 4px;
      cursor: pointer;
      flex-shrink: 0;
      position: relative;
      transition: all 0.3s ease;
    }

    .checkbox:hover {
      border-color: #FF1B8D;
      box-shadow: 0 0 10px rgba(255, 27, 141, 0.5);
    }

    .checkbox.checked {
      background: #32CD32;
      border-color: #32CD32;
    }

    .checkbox.checked::after {
      content: '‚úì';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: #000;
      font-weight: bold;
      font-size: 14px;
    }

    .iframe-container {
      margin-top: 2rem;
      background: rgba(0, 0, 0, 0.3);
      border: 2px solid #FF1B8D;
      border-radius: 12px;
      padding: 1rem;
      min-height: 600px;
    }

    .iframe-container h3 {
      color: #FFD700;
      margin-bottom: 1rem;
      text-align: center;
    }

    iframe {
      width: 100%;
      height: 550px;
      border: none;
      border-radius: 8px;
      background: white;
    }

    .note {
      background: rgba(255, 215, 0, 0.1);
      border-left: 4px solid #FFD700;
      padding: 1rem;
      margin: 1rem 0;
      border-radius: 4px;
      color: #FFD700;
    }

    .note strong {
      color: #FF1B8D;
    }

    .results {
      background: rgba(50, 205, 50, 0.1);
      border: 2px solid #32CD32;
      border-radius: 12px;
      padding: 2rem;
      margin-top: 2rem;
      text-align: center;
    }

    .results h2 {
      color: #32CD32;
      margin-bottom: 1rem;
    }

    .results .score {
      font-size: 3rem;
      color: #FFD700;
      font-weight: bold;
      margin: 1rem 0;
    }

    .results .verdict {
      font-size: 1.5rem;
      margin-top: 1rem;
    }

    .btn {
      background: linear-gradient(135deg, #FF1B8D 0%, #9B5DE5 100%);
      color: white;
      border: none;
      padding: 1rem 2rem;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      margin: 0.5rem;
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 16px rgba(255, 27, 141, 0.4);
    }

    .btn-secondary {
      background: linear-gradient(135deg, #00F5FF 0%, #32CD32 100%);
      color: #000;
    }

    @media (max-width: 768px) {
      body {
        padding: 1rem;
      }

      h1 {
        font-size: 1.8rem;
      }

      .test-card {
        padding: 1.5rem;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>üåê PattaMap i18n Visual Testing Suite</h1>
      <p class="subtitle">Phase 2.1 - Language Switching Validation</p>
    </header>

    <!-- Test Card 1: Pre-Test Setup -->
    <div class="test-card">
      <h2>
        üöÄ Test 1: Pre-Test Setup
        <span class="status-badge status-warn" id="test1-status">Pending</span>
      </h2>

      <div class="test-instructions">
        <h3>üìã Instructions:</h3>
        <ol>
          <li>Ensure PattaMap frontend is running: <code>npm start</code></li>
          <li>Open browser to: <a href="http://localhost:3000" target="_blank" style="color: #00F5FF;">http://localhost:3000</a></li>
          <li>Open browser DevTools (F12) and check Console for errors</li>
          <li>Verify no i18n-related errors in console</li>
        </ol>
      </div>

      <ul class="test-checklist">
        <li>
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <span>Frontend server running on localhost:3000</span>
        </li>
        <li>
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <span>Landing page loads without errors</span>
        </li>
        <li>
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <span>No console errors related to i18n</span>
        </li>
        <li>
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <span>LanguageSelector component visible in header</span>
        </li>
      </ul>
    </div>

    <!-- Test Card 2: Language Selector Functionality -->
    <div class="test-card">
      <h2>
        üîÑ Test 2: Language Selector Functionality
        <span class="status-badge status-warn" id="test2-status">Pending</span>
      </h2>

      <div class="test-instructions">
        <h3>üìã Instructions:</h3>
        <ol>
          <li>Locate the language selector in the top-right header (dropdown with "EN")</li>
          <li>Click to open dropdown menu</li>
          <li>Verify all 6 languages listed: EN, TH, RU, CN, FR, HI</li>
          <li>Check that current language has checkmark (‚úì)</li>
          <li>Click on different language (e.g., TH - Thai)</li>
          <li>Verify dropdown closes automatically</li>
          <li>Verify selected language updates in dropdown button</li>
        </ol>
      </div>

      <ul class="test-checklist">
        <li>
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <span>Language selector visible and clickable</span>
        </li>
        <li>
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <span>Dropdown opens on click</span>
        </li>
        <li>
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <span>All 6 languages displayed (EN, TH, RU, CN, FR, HI)</span>
        </li>
        <li>
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <span>Current language has checkmark (‚úì)</span>
        </li>
        <li>
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <span>Clicking language switches immediately</span>
        </li>
        <li>
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <span>Dropdown closes after selection</span>
        </li>
        <li>
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <span>Click outside dropdown closes it</span>
        </li>
      </ul>
    </div>

    <!-- Test Card 3: Translation Rendering (English) -->
    <div class="test-card">
      <h2>
        ‚úÖ Test 3: Translation Rendering (English)
        <span class="status-badge status-warn" id="test3-status">Pending</span>
      </h2>

      <div class="test-instructions">
        <h3>üìã Instructions:</h3>
        <ol>
          <li>Switch language to English (EN)</li>
          <li>Navigate to different pages: Home, Map, Search, Login</li>
          <li>Verify all text renders in English</li>
          <li>Check new Phase 2.1 components (if visible):
            <ul style="margin-top: 0.5rem; padding-left: 1.5rem;">
              <li>PhotoGalleryModal (click employee photo to open)</li>
              <li>EmployeeCard (hover to see aria-labels)</li>
              <li>StarRating (inspect for aria-labels)</li>
            </ul>
          </li>
        </ol>
      </div>

      <ul class="test-checklist">
        <li>
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <span>Header text in English</span>
        </li>
        <li>
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <span>Map zone names in English (Soi 6, Walking Street, etc.)</span>
        </li>
        <li>
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <span>Search placeholder in English</span>
        </li>
        <li>
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <span>Login form labels in English</span>
        </li>
        <li>
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <span>PhotoGalleryModal navigation buttons ("Previous", "Next", "Close")</span>
        </li>
        <li>
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <span>No visible translation keys (e.g., "map.title" should show "Ergonomic Maps")</span>
        </li>
      </ul>
    </div>

    <!-- Test Card 4: Translation Rendering (Other Languages) -->
    <div class="test-card">
      <h2>
        ‚ö†Ô∏è Test 4: Translation Rendering (TH/RU/CN/FR/HI)
        <span class="status-badge status-warn" id="test4-status">Pending</span>
      </h2>

      <div class="test-instructions">
        <h3>üìã Instructions:</h3>
        <ol>
          <li>Switch to Thai (TH) language</li>
          <li>Verify existing translated text renders in Thai</li>
          <li>Note: Some text may show in English (expected - fallback for missing translations)</li>
          <li>Check console for i18n warnings about missing keys</li>
          <li>Repeat for RU, CN, FR, HI (expect similar partial translation)</li>
        </ol>
      </div>

      <div class="note">
        <strong>‚ö†Ô∏è Expected Behavior:</strong> Non-English languages are 47.70% complete.
        You SHOULD see a mix of translated text and English fallback. This is CORRECT behavior.
        New Phase 2.1 components (photoGalleryModal, employeeCard, starRating) will show English text.
      </div>

      <ul class="test-checklist">
        <li>
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <span>TH: Common words translated (header, buttons, etc.)</span>
        </li>
        <li>
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <span>TH: Map zone names show in Thai characters</span>
        </li>
        <li>
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <span>TH: New components fallback to English (photoGalleryModal, etc.)</span>
        </li>
        <li>
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <span>No console errors (warnings OK for missing keys)</span>
        </li>
        <li>
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <span>RU: Partial Cyrillic text visible</span>
        </li>
        <li>
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <span>CN: Partial Chinese characters visible</span>
        </li>
      </ul>
    </div>

    <!-- Test Card 5: Persistence & Performance -->
    <div class="test-card">
      <h2>
        üíæ Test 5: Persistence & Performance
        <span class="status-badge status-warn" id="test5-status">Pending</span>
      </h2>

      <div class="test-instructions">
        <h3>üìã Instructions:</h3>
        <ol>
          <li>Switch to Thai (TH)</li>
          <li>Refresh page (F5)</li>
          <li>Verify language persists (still TH after refresh)</li>
          <li>Open browser DevTools ‚Üí Application ‚Üí Local Storage</li>
          <li>Check for key: <code>pattamap_language</code> with value: <code>th</code></li>
          <li>Test language switch performance (should be instant, < 100ms)</li>
        </ol>
      </div>

      <ul class="test-checklist">
        <li>
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <span>Language persists after page refresh</span>
        </li>
        <li>
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <span>localStorage key "pattamap_language" set correctly</span>
        </li>
        <li>
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <span>Language switch is instant (no visible lag)</span>
        </li>
        <li>
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <span>No layout shift when switching languages</span>
        </li>
        <li>
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <span>No unnecessary re-renders (check React DevTools if installed)</span>
        </li>
      </ul>
    </div>

    <!-- Test Card 6: Component-Specific Tests -->
    <div class="test-card">
      <h2>
        üéØ Test 6: Phase 2.1 Components (EN Only)
        <span class="status-badge status-warn" id="test6-status">Pending</span>
      </h2>

      <div class="test-instructions">
        <h3>üìã Instructions:</h3>
        <ol>
          <li>Switch to English (EN)</li>
          <li>Navigate to an employee profile with photos</li>
          <li><strong>PhotoGalleryModal</strong>: Click main photo ‚Üí Inspect navigation buttons ‚Üí Check aria-labels in DevTools</li>
          <li><strong>EmployeeCard</strong>: Hover over card ‚Üí Right-click ‚Üí Inspect ‚Üí Check aria-label and img alt text</li>
          <li><strong>StarRating</strong>: Find rating component ‚Üí Inspect stars ‚Üí Check aria-labels</li>
          <li><strong>MapSidebar</strong>: Open map ‚Üí Check zone names in sidebar</li>
          <li><strong>EmployeesListModal</strong>: Click "Zone Lineup" button ‚Üí Check zone name in modal subtitle</li>
        </ol>
      </div>

      <ul class="test-checklist">
        <li>
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <span>PhotoGalleryModal: aria-labels present ("Close", "Previous", "Next")</span>
        </li>
        <li>
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <span>PhotoGalleryModal: alt text with interpolation (e.g., "Name - Photo 1 of 5")</span>
        </li>
        <li>
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <span>EmployeeCard: aria-label "View [name]'s profile"</span>
        </li>
        <li>
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <span>EmployeeCard: img alt "[name], [age] years old from [nationality]"</span>
        </li>
        <li>
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <span>StarRating: aria-labels with pluralization ("1 star" vs "5 stars")</span>
        </li>
        <li>
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <span>MapSidebar: Zone names translated (e.g., "Soi 6", "Walking Street")</span>
        </li>
        <li>
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <span>EmployeesListModal: Zone name in subtitle (not prop zoneName)</span>
        </li>
      </ul>
    </div>

    <!-- Results Summary -->
    <div class="results" id="results" style="display: none;">
      <h2>üèÜ Test Results</h2>
      <div class="score" id="score">0/0</div>
      <div class="verdict" id="verdict">Complete all tests to see results</div>
      <button class="btn btn-secondary" onclick="resetTests()">üîÑ Reset All Tests</button>
      <button class="btn" onclick="generateReport()">üìÑ Generate Report</button>
    </div>

    <div style="text-align: center; margin-top: 2rem;">
      <button class="btn" onclick="calculateResults()">üìä Calculate Results</button>
      <button class="btn btn-secondary" onclick="window.print()">üñ®Ô∏è Print Report</button>
    </div>
  </div>

  <script>
    function toggleCheck(element) {
      element.classList.toggle('checked');
      updateTestStatus();
    }

    function updateTestStatus() {
      // Update individual test statuses
      for (let i = 1; i <= 6; i++) {
        const testCard = document.querySelectorAll('.test-card')[i - 1];
        const checkboxes = testCard.querySelectorAll('.checkbox');
        const totalChecks = checkboxes.length;
        const checkedCount = testCard.querySelectorAll('.checkbox.checked').length;
        const statusBadge = document.getElementById(`test${i}-status`);

        if (checkedCount === 0) {
          statusBadge.textContent = 'Pending';
          statusBadge.className = 'status-badge status-warn';
        } else if (checkedCount === totalChecks) {
          statusBadge.textContent = 'Complete';
          statusBadge.className = 'status-badge status-pass';
        } else {
          statusBadge.textContent = `${checkedCount}/${totalChecks}`;
          statusBadge.className = 'status-badge status-warn';
        }
      }
    }

    function calculateResults() {
      const allCheckboxes = document.querySelectorAll('.checkbox');
      const checkedBoxes = document.querySelectorAll('.checkbox.checked');
      const total = allCheckboxes.length;
      const checked = checkedBoxes.length;
      const percentage = ((checked / total) * 100).toFixed(1);

      document.getElementById('score').textContent = `${checked}/${total}`;
      document.getElementById('results').style.display = 'block';

      let verdict = '';
      if (percentage >= 95) {
        verdict = '‚úÖ Excellent! i18n system working perfectly!';
      } else if (percentage >= 80) {
        verdict = '‚úÖ Good! Minor issues detected.';
      } else if (percentage >= 60) {
        verdict = '‚ö†Ô∏è Warning! Several issues detected.';
      } else {
        verdict = '‚ùå Critical! Major issues detected.';
      }

      document.getElementById('verdict').textContent = verdict;
      document.getElementById('verdict').style.color = percentage >= 80 ? '#32CD32' : percentage >= 60 ? '#FFD700' : '#FF1B8D';

      // Scroll to results
      document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
    }

    function resetTests() {
      document.querySelectorAll('.checkbox').forEach(box => {
        box.classList.remove('checked');
      });
      updateTestStatus();
      document.getElementById('results').style.display = 'none';
    }

    function generateReport() {
      const allCheckboxes = document.querySelectorAll('.checkbox');
      const checkedBoxes = document.querySelectorAll('.checkbox.checked');
      const total = allCheckboxes.length;
      const checked = checkedBoxes.length;
      const percentage = ((checked / total) * 100).toFixed(1);

      let report = `PattaMap i18n Visual Test Report\n`;
      report += `================================\n\n`;
      report += `Date: ${new Date().toLocaleString()}\n`;
      report += `Total Checks: ${total}\n`;
      report += `Passed: ${checked}\n`;
      report += `Success Rate: ${percentage}%\n\n`;

      report += `Test Results by Category:\n`;
      report += `-------------------------\n`;

      for (let i = 1; i <= 6; i++) {
        const testCard = document.querySelectorAll('.test-card')[i - 1];
        const testTitle = testCard.querySelector('h2').textContent.split('\n')[0].trim();
        const checkboxes = testCard.querySelectorAll('.checkbox');
        const checkedCount = testCard.querySelectorAll('.checkbox.checked').length;

        report += `\n${testTitle}: ${checkedCount}/${checkboxes.length}\n`;

        testCard.querySelectorAll('.test-checklist li').forEach((item, idx) => {
          const checkbox = item.querySelector('.checkbox');
          const isChecked = checkbox.classList.contains('checked');
          const text = item.querySelector('span').textContent;
          report += `  ${isChecked ? '‚úì' : '‚úó'} ${text}\n`;
        });
      }

      // Download report
      const blob = new Blob([report], { type: 'text/plain' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `pattamap-i18n-test-${Date.now()}.txt`;
      a.click();
      URL.revokeObjectURL(url);

      alert('Report generated and downloaded!');
    }
  </script>
</body>
</html>
